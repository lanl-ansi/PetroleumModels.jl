<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>File IO · PetroleumModels</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-367975-10', 'auto');
ga('send', 'pageview', {'page': location.pathname + location.search + location.hash});
</script><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="PetroleumModels logo"/></a><div class="docs-package-name"><span class="docs-autofit">PetroleumModels</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickguide/">Getting Started</a></li><li><a class="tocitem" href="../data-format/">Input Data Formats</a></li><li><a class="tocitem" href="../network-data/">Network Data Format</a></li><li><a class="tocitem" href="../result-data/">Result Data Format</a></li><li><a class="tocitem" href="../math-model/">Mathematical Model</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../formulations/">Network Formulations</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Steady State Specifications</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ss-specifications/">Problem Specifications</a></li><li><a class="tocitem" href="../objective/">Objective</a></li><li><a class="tocitem" href="../variables/">Variables</a></li><li><a class="tocitem" href="../constraints/">Constraints</a></li></ul></li><li><a class="tocitem" href="../transient-specifications/">Transient Specifications</a></li><li class="is-active"><a class="tocitem" href>File IO</a><ul class="internal"><li><a class="tocitem" href="#General-Data-Formats"><span>General Data Formats</span></a></li><li><a class="tocitem" href="#Matpetro-Data-Files"><span>Matpetro Data Files</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../developer/">Developer</a></li><li><a class="tocitem" href="../examples/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>File IO</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>File IO</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/master/docs/src/parser.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="File-IO"><a class="docs-heading-anchor" href="#File-IO">File IO</a><a id="File-IO-1"></a><a class="docs-heading-anchor-permalink" href="#File-IO" title="Permalink"></a></h1><h2 id="General-Data-Formats"><a class="docs-heading-anchor" href="#General-Data-Formats">General Data Formats</a><a id="General-Data-Formats-1"></a><a class="docs-heading-anchor-permalink" href="#General-Data-Formats" title="Permalink"></a></h2><p>The json file format is a direct JSON serialization of PetroleumModels internal data model. As such, the json file format is intended to be a temporary storage format. PetroleumModels does not maintain backwards compatibility with serializations of earlier versions of the Petroleum Models internal data model.</p><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels.parse_file" href="#PetroleumModels.parse_file"><code>PetroleumModels.parse_file</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">parse_file(io)</code></pre><p>Parses the IOStream of a file into a Models data structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/common.jl#L1-L4">source</a></section><section><div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/common.jl#L22">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>parse_json</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Matpetro-Data-Files"><a class="docs-heading-anchor" href="#Matpetro-Data-Files">Matpetro Data Files</a><a id="Matpetro-Data-Files-1"></a><a class="docs-heading-anchor-permalink" href="#Matpetro-Data-Files" title="Permalink"></a></h2><p>The following method is the main methods for parsing Matpetro data files:</p><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels.parse_matpetro" href="#PetroleumModels.parse_matpetro"><code>PetroleumModels.parse_matpetro</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Parses the matpetroleum data from either a filename or an IO object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L1">source</a></section></article><p>We also provide the following (internal) helper methods:</p><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels._get_default" href="#PetroleumModels._get_default"><code>PetroleumModels._get_default</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Get a default value for dict entry</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L422">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels._matpetroleum_to_petroleummodels-Tuple{Dict{String,Any}}" href="#PetroleumModels._matpetroleum_to_petroleummodels-Tuple{Dict{String,Any}}"><code>PetroleumModels._matpetroleum_to_petroleummodels</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Converts a matpetroleum dict into a PowerModels dict</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L362">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels._merge_generic_data!-Tuple{Dict{String,Any}}" href="#PetroleumModels._merge_generic_data!-Tuple{Dict{String,Any}}"><code>PetroleumModels._merge_generic_data!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>merges Matlab tables based on the table extension syntax</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L380">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels._petroleummodels_to_matpetroleum_string-Tuple{Dict{String,Any}}" href="#PetroleumModels._petroleummodels_to_matpetroleum_string-Tuple{Dict{String,Any}}"><code>PetroleumModels._petroleummodels_to_matpetroleum_string</code></a> — <span class="docstring-category">Method</span></header><section><div><p>write to matpetroleum</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L475">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels.parse_m_file-Tuple{IO}" href="#PetroleumModels.parse_m_file-Tuple{IO}"><code>PetroleumModels.parse_m_file</code></a> — <span class="docstring-category">Method</span></header><section><div><p>parses matlab-formatted .m file</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L138">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels.parse_m_file-Tuple{String}" href="#PetroleumModels.parse_m_file-Tuple{String}"><code>PetroleumModels.parse_m_file</code></a> — <span class="docstring-category">Method</span></header><section><div><p>parses matlab-formatted .m file</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L128">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels.parse_m_string-Tuple{String}" href="#PetroleumModels.parse_m_string-Tuple{String}"><code>PetroleumModels.parse_m_string</code></a> — <span class="docstring-category">Method</span></header><section><div><p>parses matlab-format string</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L146">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels.parse_matpetro-Tuple{Union{IO, String}}" href="#PetroleumModels.parse_matpetro-Tuple{Union{IO, String}}"><code>PetroleumModels.parse_matpetro</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Parses the matpetroleum data from either a filename or an IO object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PetroleumModels.write_matpetroleum!-Tuple{Dict{String,Any},String}" href="#PetroleumModels.write_matpetroleum!-Tuple{Dict{String,Any},String}"><code>PetroleumModels.write_matpetroleum!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>writes data structure to matlab format</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lanl-ansi/PetroleumModels.jl/blob/df35cd4999a1289710640a46882de7f665d4b32f/src/io/matpetro.jl#L574">source</a></section></article><p>This format was designed to have a similar look a feel to the Matlab MatPower format (in the case of PetroleumModels, we refer to it as the MatPetro format), however, it standardizes around data requirements developed by the PetroleumModels development team. It is largely stable. Additional fields for each component in the MatPetro format can be incorporated using the Matlab extensions developed in InfrastructureModels.jl.</p><p>The top of the file contains global information about the network like its name, liquid density, etc.</p><pre><code class="language-none">function mpc = case5

mpc.density                    = 827;     % petroleum density, kg per cubic m
mpc.viscosity                  = 4.9e-6;  % petroleum viscosity, squared m per second
mpc.gravitational_acceleration = 9.8;
mpc.base_head                  = 100;     % base head, m
mpc.base_length                = 542;     % m
mpc.base_flow                  = 0.5;     % petroleum volume flow rate, m3 per hour
mpc.units                      = &#39;si&#39;;
mpc.is_per_unit                = 0;
mpc.time_step                  = 0;</code></pre><p>Junction data is defined with the following tabular format</p><pre><code class="language-none">%% junction data
%  junction_i type head_min head_max elevation status
mpc.junction = [
...
]</code></pre><p>The reader is referred to <a href="@ref">Matpetro Format (.m)</a> for a detailed description of each column in the above table.</p><p>Pipeline data is defined with the following tabular format</p><pre><code class="language-none">%% pipe data
% pipeline_i fr_junction to_junction diameter length flow_min flow_max friction_factor status
mpc.pipe = [
...
]</code></pre><p>The reader is referred to <a href="@ref">Matpetro Format (.m)</a> for a detailed description of each column in the above table.</p><p>Pump data is defined with the following tabular format</p><pre><code class="language-none">%% pump data
% pump_i fr_junction to_junction station_i rotation_coefficient flow_coefficient flow_nom flow_max delta_head_min delta_head_max pump_efficiency_min pump_efficiency_max rotation_nom rotation_min rotation_max electricity_price status electric_motor_efficiency mechanical_transmission_efficiency
mpc.pump = [
...</code></pre><p>The reader is referred to <a href="@ref">Matpetro Format (.m)</a> for a detailed description of each column in the above table.</p><p>Producer data is defined with the following tabular format</p><pre><code class="language-none">%% producer data
% producer_i junction injection_min injection_max injection_nominal status dispatchable offer_price
mpc.producer = [
...</code></pre><p>The reader is referred to <a href="@ref">Matpetro Format (.m)</a> for a detailed description of each column in the above table.</p><p>Consumer data is defined with the following tabular format</p><pre><code class="language-none">%% consumer data
% consumer_i junction withdrawal_min withdrawal_max withdrawal_nominal status dispatchable bid_price
mpc.consumer = [
...</code></pre><p>The reader is referred to <a href="@ref">Matpetro Format (.m)</a> for a detailed description of each column in the above table.</p><p>Tank data is defined with the following tabular format</p><pre><code class="language-none">%% tank data
% tank_i fr_junction to_junction vessel_pressure_head radius capacity_min capacity_max initial_volume intake_min intake_max offtake_min offtake_max Cd status price p_price
mgc.tank = [
...</code></pre><p>The reader is referred to <a href="@ref">Matpetro Format (.m)</a> for a detailed description of each column in the above table.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../transient-specifications/">« Transient Specifications</a><a class="docs-footer-nextpage" href="../developer/">Developer »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 17 February 2021 22:41">Wednesday 17 February 2021</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
